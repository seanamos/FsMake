<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Use as a project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="seanamos">

    <link rel="stylesheet" id="theme_link" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.6.0/materia/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <link type="text/css" rel="stylesheet" href="https://seanamos.github.io/FsMake/content/navbar-fixed-left.css" />
    <link type="text/css" rel="stylesheet" href="https://seanamos.github.io/FsMake/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="https://seanamos.github.io/FsMake/content/fsdocs-custom.css" />
    <script type="text/javascript" src="https://seanamos.github.io/FsMake/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-secondary container fixed-left" id="fsdocs-nav">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse navbar-nav-scroll" id="navbarsExampleDefault">
            <a href="https://seanamos.github.io/FsMake"><img id="fsdocs-logo" src="https://seanamos.github.io/FsMake/img/logo.png" /></a>
            <!-- BEGIN SEARCH BOX: this adds support for the search box -->
            <div id="header">
                <div class="searchbox" id="fsdocs-searchbox">
                    <label for="search-by">
                        <i class="fas fa-search"></i>
                    </label>
                    <input data-search-input="" id="search-by" type="search" placeholder="Search..." />
                    <span data-search-clear="">
                        <i class="fas fa-times"></i>
                    </span>
                </div>
            </div>

            <!-- END SEARCH BOX: this adds support for the search box -->
            <ul class="navbar-nav">
                <li class="nav-header">Links</li>
                <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="https://github.com/seanamos/FsMake/blob/master/LICENSE.md">License</a></li>
                <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="https://github.com/seanamos/FsMake/releases">Release Notes</a></li>
                <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="https://github.com/seanamos/FsMake/">Source Repository</a></li>
                <li class="nav-header">
  Guides
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://seanamos.github.io/FsMake/guides/use-as-project.html">
    Use as a project
  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://seanamos.github.io/FsMake/guides/use-with-paket.html">
    Use with paket load scripts
  </a>
</li>             
<li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://seanamos.github.io/FsMake/documentation/concepts.html">
    Concepts
  </a>
</li>
                <li class="nav-header">
  API Reference
</li>             
<li class="nav-item">
  <a class="nav-link" href="https://seanamos.github.io/FsMake/reference/index.html">
    All Namespaces
  </a>
</li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <div class="masthead">
            <h3 class="muted"><a href="https://seanamos.github.io/FsMake/">FsMake</a></h3>
        </div>
        <hr />
        <div class="container" id="fsdocs-content">
            
<h1><a name="Use-as-a-project" class="anchor" href="#Use-as-a-project">Use as a project</a></h1>
<p>In the example below, replace <code>MyProject</code> with your root namespace(s).</p>
<p>Create a folder and a new console project in your solution directory.</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="sh">mkdir MyProject.Build

dotnet new console -lang F# -o MyProject.Build

dotnet sln add MyProject.Build
</code></pre></td></tr></table>
<p>Add a nuget reference to FsMake</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="sh">// using paket
dotnet paket add --project MyProject.Build FsMake

// using nuget
dotnet add MyProject.Build package FsMake
</code></pre></td></tr></table>
<p>Open <code>MyProject.Build/Program.fs</code> and replace its contents with:</p>
<!-- Sep -->
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">FsMake</span>

<span class="pn">[&lt;</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="rt">EntryPoint</span><span class="pn">&gt;]</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="fn">main</span> <span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="fn">argv</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="fn">restore</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="m">Step</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="id">create</span> <span class="s">&quot;restore&quot;</span> <span class="pn">{</span>
            <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="m">Cmd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="id">createWithArgs</span> <span class="s">&quot;dotnet&quot;</span> <span class="pn">[</span> <span class="s">&quot;restore&quot;</span> <span class="pn">]</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 10)" onmouseover="showTip(event, 'fs8', 10)" class="m">Cmd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="id">run</span>
        <span class="pn">}</span>

    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 12)" onmouseover="showTip(event, 'fs11', 12)" class="fn">build</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs6', 13)" onmouseover="showTip(event, 'fs6', 13)" class="m">Step</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs7', 14)" onmouseover="showTip(event, 'fs7', 14)" class="id">create</span> <span class="s">&quot;build&quot;</span> <span class="pn">{</span>
            <span class="k">do!</span> <span onmouseout="hideTip(event, 'fs8', 15)" onmouseover="showTip(event, 'fs8', 15)" class="m">Cmd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 16)" onmouseover="showTip(event, 'fs9', 16)" class="id">createWithArgs</span> <span class="s">&quot;dotnet&quot;</span> <span class="pn">[</span> <span class="s">&quot;build&quot;</span> <span class="pn">]</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs8', 17)" onmouseover="showTip(event, 'fs8', 17)" class="m">Cmd</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="id">run</span>
        <span class="pn">}</span>

    <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="m">Pipelines</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="id">create</span> <span class="pn">{</span>
        <span class="k">let!</span> <span onmouseout="hideTip(event, 'fs14', 21)" onmouseover="showTip(event, 'fs14', 21)" class="fn">build</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs15', 22)" onmouseover="showTip(event, 'fs15', 22)" class="m">Pipeline</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 23)" onmouseover="showTip(event, 'fs16', 23)" class="id">create</span> <span class="s">&quot;build&quot;</span> <span class="pn">{</span>
                <span onmouseout="hideTip(event, 'fs17', 24)" onmouseover="showTip(event, 'fs17', 24)" class="k">run</span> <span onmouseout="hideTip(event, 'fs5', 25)" onmouseover="showTip(event, 'fs5', 25)" class="fn">restore</span>
                <span onmouseout="hideTip(event, 'fs17', 26)" onmouseover="showTip(event, 'fs17', 26)" class="k">run</span> <span onmouseout="hideTip(event, 'fs11', 27)" onmouseover="showTip(event, 'fs11', 27)" class="fn">build</span>
            <span class="pn">}</span>

        <span onmouseout="hideTip(event, 'fs18', 28)" onmouseover="showTip(event, 'fs18', 28)" class="k">default_pipeline</span> <span onmouseout="hideTip(event, 'fs11', 29)" onmouseover="showTip(event, 'fs11', 29)" class="fn">build</span>
    <span class="pn">}</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs12', 30)" onmouseover="showTip(event, 'fs12', 30)" class="m">Pipelines</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="id">runWithArgs</span> <span onmouseout="hideTip(event, 'fs4', 32)" onmouseover="showTip(event, 'fs4', 32)" class="fn">argv</span>
</code></pre>
<p>To run your build:</p>
<table class="pre"><tr><td class="snippet"><pre class="fssnip"><code lang="sh">dotnet run --project MyProject.Build
</code></pre></td></tr></table>

            <div class="fsdocs-tip" id="fs1">namespace FsMake</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />type EntryPointAttribute =
  inherit Attribute
  new: unit -&gt; EntryPointAttribute<br /><em>&lt;summary&gt;Adding this attribute to a function indicates it is the entrypoint for an application.
 If this attribute is not specified for an EXE then the initialization implicit in the
 module bindings in the last file in the compilation sequence are used as the entrypoint.&lt;/summary&gt;<br />&lt;category&gt;Attributes&lt;/category&gt;</em><br /><br />--------------------<br />new: unit -&gt; EntryPointAttribute</div>
<div class="fsdocs-tip" id="fs3">val main: argv: string[] -&gt; int</div>
<div class="fsdocs-tip" id="fs4">val argv: string[]</div>
<div class="fsdocs-tip" id="fs5">val restore: Step</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />module Step

from FsMake<br /><em>&lt;summary&gt;
 Module for creating and working with steps.
 &lt;/summary&gt;</em><br /><br />--------------------<br />type Step =
  {
    Name: string
    Make: Make&lt;unit&gt;
  }<br /><em>&lt;summary&gt;
 Represents a pipeline step.
 &lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs7">val create: name: string -&gt; Step.Builder<br /><em>&lt;summary&gt;
 Creates a step using a &lt;see cref=&quot;T:FsMake.StepModule.Builder&quot; /&gt; computation expression.
 &lt;/summary&gt;<br />&lt;param name=&quot;name&quot;&gt;The name of the step.&lt;/param&gt;<br />&lt;returns&gt;A &lt;see cref=&quot;T:FsMake.StepModule.Builder&quot; /&gt;.&lt;/returns&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let emptyStep =
     Step.create &quot;emptyStep&quot; {
         ()
     }
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs8">module Cmd

from FsMake<br /><em>&lt;summary&gt;
 Module for building and executing commands or processes.
 &lt;/summary&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let step = Step.create &quot;mStep&quot; {
     do! Cmd.createWithArgs &quot;dotnet&quot; [ &quot;build&quot; ] |&amp;gt; Cmd.run
     let! result = Cmd.createWithArgs &quot;dotnet&quot; [ &quot;gitversion&quot; ] |&amp;gt; Cmd.result
     printfn &quot;%s&quot; result.Output.Std
 }
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs9">val createWithArgs: cmd: string -&gt; args: string list -&gt; Cmd.CmdOptions&lt;unit&gt;<br /><em>&lt;summary&gt;
 Creates a &lt;see cref=&quot;T:FsMake.Cmd.CmdOptions`1&quot; /&gt; with a command to run.
 &lt;/summary&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let cmd = Cmd.createWithArgs &quot;dotnet&quot; [ &quot;build&quot;; &quot;--no-restore&quot; ]
 &lt;/code&gt;&lt;/example&gt;<br />&lt;param name=&quot;cmd&quot;&gt;The command to run.&lt;/param&gt;<br />&lt;param name=&quot;args&quot;&gt;A list of arguments to be passed to the command.&lt;/param&gt;<br />&lt;returns&gt;The new &lt;see cref=&quot;T:FsMake.Cmd.CmdOptions`1&quot; /&gt;.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs10">val run: opts: Cmd.CmdOptions&lt;&#39;a&gt; -&gt; ctx: MakeContext -&gt; Result&lt;unit,MakeError&gt;<br /><em>&lt;summary&gt;
 Runs a command/process with the specified options.
 &lt;/summary&gt;<br />&lt;param name=&quot;opts&quot;&gt;The &lt;see cref=&quot;T:FsMake.Cmd.CmdOptions`1&quot; /&gt;.&lt;/param&gt;<br />&lt;param name=&quot;ctx&quot;&gt;The &lt;see cref=&quot;T:MakeContext&quot; /&gt; of the current &lt;see cref=&quot;T:Make`1&quot; /&gt;.&lt;/param&gt;<br />&lt;typeparam name=&quot;&#39;a&quot;&gt;The command output type.&lt;/typeparam&gt;<br />&lt;returns&gt;The result.&lt;/returns&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let build =
     Step.create &quot;build&quot; {
         do! Cmd.createWithArgs &quot;dotnet&quot; [ &quot;build&quot; ] |&amp;gt; Cmd.run
     }
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs11">val build: Step</div>
<div class="fsdocs-tip" id="fs12">Multiple items<br />module Pipelines

from FsMake<br /><em>&lt;summary&gt;
 Module for creating and working with &lt;see cref=&quot;T:Pipelines&quot; /&gt;.
 &lt;/summary&gt;</em><br /><br />--------------------<br />type Pipelines =
  {
    Default: Pipeline option
    Pipelines: Pipeline list
    StepPrefix: PrefixOption
  }<br /><em>&lt;summary&gt;
 Represents a set of pipelines and settings.
 &lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs13">val create: Pipelines.Builder<br /><em>&lt;summary&gt;
 Use a computation expression builder to define &lt;see cref=&quot;T:Pipelines&quot; /&gt;.
 &lt;/summary&gt;<br />&lt;returns&gt;A &lt;see cref=&quot;T:Pipelines.Builder&quot; /&gt;.&lt;/returns&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let clean = Step.create &quot;clean&quot; { () }
 let build = Step.create &quot;build&quot; { () }
 let testUnit = Step.create &quot;test:unit&quot; { () }
 let testInt = Step.create &quot;test:integration&quot; { () }

 let pipelines =
     Pipelines.create {
         // adds the build pipeline to the `Pipelines`
         let! build = Pipeline.create &quot;build&quot; {
             run clean
             run build
         }

         // adds the test pipeline to the &lt;see cref=&quot;Pipelines&quot; /&gt;
         do! Pipeline.createFrom build &quot;test&quot; {
             run_parallel [ testUnit; testInt ]
         }

         default_pipeline build
     }
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs14">val build: Pipeline</div>
<div class="fsdocs-tip" id="fs15">Multiple items<br />module Pipeline

from FsMake<br /><em>&lt;summary&gt;
 Module for creating and working with a &lt;see cref=&quot;T:Pipeline&quot; /&gt;.
 &lt;/summary&gt;</em><br /><br />--------------------<br />type Pipeline =
  {
    Name: string
    Description: string option
    Stages: Stage list
  }<br /><em>&lt;summary&gt;
 Represents a pipeline and its stages.
 &lt;/summary&gt;</em></div>
<div class="fsdocs-tip" id="fs16">val create: name: string -&gt; Pipeline.Builder<br /><em>&lt;summary&gt;
 Creates a pipeline using a &lt;see cref=&quot;T:FsMake.PipelineModule.Builder&quot; /&gt; computation expression.
 &lt;/summary&gt;<br />&lt;param name=&quot;name&quot;&gt;The name of the pipeline.&lt;/param&gt;<br />&lt;returns&gt;A &lt;see cref=&quot;T:FsMake.PipelineModule.Builder&quot; /&gt;.&lt;/returns&gt;<br />&lt;example&gt;&lt;code lang=&quot;fsharp&quot;&gt;
 let emptyStep = Step.create &quot;emptyStep&quot; { () }
 let pipeline =
     Pipeline.create &quot;pipeline&quot; {
         run emptyStep
     }
 &lt;/code&gt;&lt;/example&gt;</em></div>
<div class="fsdocs-tip" id="fs17">custom operation: run (Step)

Calls Pipeline.Builder.RunStep<br /><em>&lt;summary&gt;
 Adds a &lt;see cref=&quot;T:Step&quot; /&gt; that will always be run.
 &lt;/summary&gt;<br />&lt;param name=&quot;state&quot;&gt;Unused.&lt;/param&gt;<br />&lt;param name=&quot;step&quot;&gt;The &lt;see cref=&quot;T:Step&quot; /&gt; to add.&lt;/param&gt;<br />&lt;returns&gt;Unit.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs18">custom operation: default_pipeline (Pipeline)

Calls Pipelines.Builder.DefaultPipeline<br /><em>&lt;summary&gt;
 Sets the default &lt;see cref=&quot;T:Pipeline&quot; /&gt; to be run when a pipeline is not specified in the arguments.
 &lt;/summary&gt;<br />&lt;param name=&quot;state&quot;&gt;The current state of the computation expression.&lt;/param&gt;<br />&lt;param name=&quot;pipeline&quot;&gt;The &lt;see cref=&quot;T:Pipeline&quot; /&gt; to be used as the default.&lt;/param&gt;<br />&lt;typeparam name=&quot;&#39;a&quot;&gt;The types of the variables in the computation expression&#39;s state.&lt;/typeparam&gt;<br />&lt;returns&gt;Updated computation expression state.&lt;/returns&gt;</em></div>
<div class="fsdocs-tip" id="fs19">val runWithArgs: args: string[] -&gt; pipelines: Pipelines -&gt; int<br /><em>&lt;summary&gt;
 Runs a &lt;see cref=&quot;T:Pipeline&quot; /&gt; from the given &lt;c&gt;pipelines&lt;/c&gt; based on the command line arguments given in &lt;c&gt;args&lt;/c&gt;.
 &lt;para&gt;
 Based on success or failure, returns a &lt;c&gt;0&lt;/c&gt; or &lt;c&gt;1&lt;/c&gt; exit code.
 &lt;/para&gt;&lt;/summary&gt;<br />&lt;param name=&quot;args&quot;&gt;Command line arguments to be parsed.&lt;/param&gt;<br />&lt;param name=&quot;pipelines&quot;&gt;&lt;see cref=&quot;T:Pipelines&quot; /&gt; definition.&lt;/param&gt;</em></div>

        </div>

        <!-- BEGIN SEARCH BOX: this adds support for the search box -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
        <script type="text/javascript">var fsdocs_search_baseurl = 'https://seanamos.github.io/FsMake/';</script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
        <script type="text/javascript" src="https://seanamos.github.io/FsMake/content/fsdocs-search.js"></script>
        <!-- END SEARCH BOX: this adds support for the search box -->
    </div>
</body>

</html>